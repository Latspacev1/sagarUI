{"ast":null,"code":"var _jsxFileName = \"/Users/hellevete/Documents/sagaruiv2/latspacefrontend/src/components/data-collection/BulkUpload.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { Layout } from '../layout/Layout';\nimport { Download, Upload, FileSpreadsheet, AlertTriangle, CheckCircle, X, Eye } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BulkUpload = () => {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [showPreview, setShowPreview] = useState(null);\n  const templateData = [{\n    facility_id: 'fac1',\n    metric_type: 'environmental',\n    metric_name: 'emissions',\n    value: 245,\n    unit: 'tons',\n    reporting_period: '2024-Q2',\n    date_recorded: '2024-06-15'\n  }, {\n    facility_id: 'fac1',\n    metric_type: 'environmental',\n    metric_name: 'energy',\n    value: 1250,\n    unit: 'MWh',\n    reporting_period: '2024-Q2',\n    date_recorded: '2024-06-15'\n  }, {\n    facility_id: 'fac1',\n    metric_type: 'social',\n    metric_name: 'employees',\n    value: 450,\n    unit: 'count',\n    reporting_period: '2024-Q2',\n    date_recorded: '2024-06-15'\n  }];\n  const downloadTemplate = () => {\n    const csv = [Object.keys(templateData[0]).join(','), ...templateData.map(row => Object.values(row).join(','))].join('\\n');\n    const blob = new Blob([csv], {\n      type: 'text/csv'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'esg_data_template.csv';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  };\n  const handleDragOver = useCallback(e => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n  const handleDragLeave = useCallback(e => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    setIsDragOver(false);\n    const droppedFiles = Array.from(e.dataTransfer.files);\n    processFiles(droppedFiles);\n  }, []);\n  const handleFileSelect = useCallback(e => {\n    if (e.target.files) {\n      const selectedFiles = Array.from(e.target.files);\n      processFiles(selectedFiles);\n    }\n  }, []);\n  const processFiles = fileList => {\n    const excelFiles = fileList.filter(file => {\n      const isExcel = file.type.includes('sheet') || file.type.includes('excel') || file.name.endsWith('.csv');\n      if (!isExcel) {\n        alert(`File ${file.name} is not a supported spreadsheet format`);\n        return false;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        // 5MB limit\n        alert(`File ${file.name} is too large. Maximum size is 5MB`);\n        return false;\n      }\n      return true;\n    });\n    const newFiles = excelFiles.map(file => ({\n      id: Math.random().toString(36).substr(2, 9),\n      name: file.name,\n      size: file.size,\n      status: 'uploading',\n      progress: 0\n    }));\n    setFiles(prev => [...prev, ...newFiles]);\n    newFiles.forEach(file => {\n      simulateFileProcessing(file.id);\n    });\n  };\n  const simulateFileProcessing = async fileId => {\n    // Simulate upload\n    for (let progress = 0; progress <= 100; progress += 25) {\n      await new Promise(resolve => setTimeout(resolve, 200));\n      setFiles(prev => prev.map(f => f.id === fileId ? {\n        ...f,\n        progress\n      } : f));\n    }\n\n    // Start validation\n    setFiles(prev => prev.map(f => f.id === fileId ? {\n      ...f,\n      status: 'validating',\n      progress: 0\n    } : f));\n\n    // Simulate validation progress\n    for (let progress = 0; progress <= 100; progress += 20) {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      setFiles(prev => prev.map(f => f.id === fileId ? {\n        ...f,\n        progress\n      } : f));\n    }\n\n    // Simulate validation results\n    const mockErrors = [{\n      row: 5,\n      column: 'value',\n      value: 'invalid',\n      error: 'Value must be numeric'\n    }, {\n      row: 8,\n      column: 'facility_id',\n      value: 'unknown',\n      error: 'Facility ID not found'\n    }];\n    const mockPreviewData = [{\n      facility_id: 'fac1',\n      metric_type: 'environmental',\n      metric_name: 'emissions',\n      value: 245,\n      unit: 'tons'\n    }, {\n      facility_id: 'fac1',\n      metric_type: 'environmental',\n      metric_name: 'energy',\n      value: 1250,\n      unit: 'MWh'\n    }, {\n      facility_id: 'fac1',\n      metric_type: 'social',\n      metric_name: 'employees',\n      value: 450,\n      unit: 'count'\n    }];\n\n    // Complete validation\n    setFiles(prev => prev.map(f => f.id === fileId ? {\n      ...f,\n      status: mockErrors.length > 0 ? 'invalid' : 'valid',\n      progress: 100,\n      rowCount: 150,\n      validRows: 148,\n      errors: mockErrors,\n      previewData: mockPreviewData\n    } : f));\n  };\n  const removeFile = fileId => {\n    setFiles(prev => prev.filter(f => f.id !== fileId));\n  };\n  const importFile = async fileId => {\n    setFiles(prev => prev.map(f => f.id === fileId ? {\n      ...f,\n      status: 'imported'\n    } : f));\n    // Simulate import process\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'valid':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"w-5 h-5 text-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 16\n        }, this);\n      case 'invalid':\n        return /*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"w-5 h-5 text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 16\n        }, this);\n      case 'imported':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"w-5 h-5 text-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const getStatusText = file => {\n    var _file$errors;\n    switch (file.status) {\n      case 'uploading':\n        return 'Uploading...';\n      case 'validating':\n        return 'Validating data...';\n      case 'valid':\n        return `Valid (${file.validRows}/${file.rowCount} rows)`;\n      case 'invalid':\n        return `Invalid (${(_file$errors = file.errors) === null || _file$errors === void 0 ? void 0 : _file$errors.length} errors found)`;\n      case 'imported':\n        return 'Successfully imported';\n      default:\n        return 'Processing...';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900\",\n          children: \"Bulk Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: downloadTemplate,\n          className: \"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), \"Download Template\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900 mb-4\",\n          children: \"Template Format\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: Object.keys(templateData[0]).map(header => /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: header\n                }, header, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: templateData.map((row, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: Object.values(row).map((value, cellIndex) => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: value\n                }, cellIndex, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this))\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `border-2 border-dashed rounded-lg p-8 text-center transition-colors ${isDragOver ? 'border-blue-400 bg-blue-50' : 'border-gray-300 hover:border-gray-400'}`,\n        onDragOver: handleDragOver,\n        onDragLeave: handleDragLeave,\n        onDrop: handleDrop,\n        children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n          className: \"w-12 h-12 text-gray-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 mb-2\",\n          children: \"Upload Excel/CSV Files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: \"Drag and drop your spreadsheet files here, or click to browse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          multiple: true,\n          accept: \".xlsx,.xls,.csv\",\n          onChange: handleFileSelect,\n          className: \"hidden\",\n          id: \"bulk-upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"bulk-upload\",\n          className: \"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), \"Choose Files\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), files.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-4 border-b border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: \"Upload Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-4\",\n          children: files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-gray-200 rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n                  className: \"w-6 h-6 text-green-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-medium text-gray-900\",\n                    children: file.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500\",\n                    children: [formatFileSize(file.size), \" \\u2022 \", getStatusText(file)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [getStatusIcon(file.status), file.status === 'valid' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setShowPreview(showPreview === file.id ? null : file.id),\n                  className: \"text-blue-600 hover:text-blue-800\",\n                  children: /*#__PURE__*/_jsxDEV(Eye, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeFile(file.id),\n                  className: \"text-gray-400 hover:text-gray-600\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 19\n            }, this), (file.status === 'uploading' || file.status === 'validating') && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs text-gray-600 mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: getStatusText(file)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [file.progress, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full bg-gray-200 rounded-full h-2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                  style: {\n                    width: `${file.progress}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 21\n            }, this), file.status === 'invalid' && file.errors && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-red-50 rounded-lg p-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-sm font-medium text-red-800 mb-2\",\n                children: [\"Validation Errors (\", file.errors.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1 max-h-32 overflow-y-auto\",\n                children: file.errors.map((error, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-red-700\",\n                  children: [\"Row \", error.row, \", Column \\\"\", error.column, \"\\\": \", error.error]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 21\n            }, this), file.status === 'valid' && showPreview === file.id && file.previewData && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-50 rounded-lg p-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-sm font-medium text-green-800 mb-2\",\n                children: \"Data Preview (First 3 rows)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"overflow-x-auto\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"min-w-full text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: Object.keys(file.previewData[0]).map(header => /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-left px-2 py-1 text-green-700\",\n                        children: header\n                      }, header, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 380,\n                        columnNumber: 33\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: file.previewData.map((row, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: Object.values(row).map((value, cellIndex) => /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-2 py-1 text-green-600\",\n                        children: String(value)\n                      }, cellIndex, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 390,\n                        columnNumber: 35\n                      }, this))\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 388,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 21\n            }, this), file.status === 'valid' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => importFile(file.id),\n                className: \"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700\",\n                children: \"Import Data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 21\n            }, this), file.status === 'imported' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-50 rounded-lg p-3\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-blue-700\",\n                children: [\"\\u2705 Successfully imported \", file.validRows, \" rows of ESG data\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 21\n            }, this)]\n          }, file.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-amber-50 border border-amber-200 rounded-lg p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(AlertTriangle, {\n              className: \"h-5 w-5 text-amber-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-medium text-amber-800\",\n              children: \"Bulk Upload Guidelines\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-amber-700\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-disc pl-5 space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Use the provided template format for best results\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Ensure facility_id matches your assigned facilities\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Numeric values should not contain commas or currency symbols\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Dates should be in YYYY-MM-DD format\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Maximum file size: 5MB per file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n};\n_s(BulkUpload, \"9kb2IZos0zQvHzEvYFeMyzpqPk8=\");\n_c = BulkUpload;\nvar _c;\n$RefreshReg$(_c, \"BulkUpload\");","map":{"version":3,"names":["React","useState","useCallback","Layout","Download","Upload","FileSpreadsheet","AlertTriangle","CheckCircle","X","Eye","jsxDEV","_jsxDEV","BulkUpload","_s","files","setFiles","isDragOver","setIsDragOver","showPreview","setShowPreview","templateData","facility_id","metric_type","metric_name","value","unit","reporting_period","date_recorded","downloadTemplate","csv","Object","keys","join","map","row","values","blob","Blob","type","url","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleDragOver","e","preventDefault","handleDragLeave","handleDrop","droppedFiles","Array","from","dataTransfer","processFiles","handleFileSelect","target","selectedFiles","fileList","excelFiles","filter","file","isExcel","includes","name","endsWith","alert","size","newFiles","id","Math","random","toString","substr","status","progress","prev","forEach","simulateFileProcessing","fileId","Promise","resolve","setTimeout","f","mockErrors","column","error","mockPreviewData","length","rowCount","validRows","errors","previewData","removeFile","importFile","formatFileSize","bytes","k","sizes","i","floor","log","parseFloat","pow","toFixed","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","getStatusText","_file$errors","children","onClick","header","index","cellIndex","onDragOver","onDragLeave","onDrop","multiple","accept","onChange","htmlFor","style","width","String","_c","$RefreshReg$"],"sources":["/Users/hellevete/Documents/sagaruiv2/latspacefrontend/src/components/data-collection/BulkUpload.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { Layout } from '../layout/Layout';\nimport { Download, Upload, FileSpreadsheet, AlertTriangle, CheckCircle, X, Eye } from 'lucide-react';\n\ninterface ValidationError {\n  row: number;\n  column: string;\n  value: string;\n  error: string;\n}\n\ninterface BulkUploadFile {\n  id: string;\n  name: string;\n  size: number;\n  status: 'uploading' | 'validating' | 'valid' | 'invalid' | 'imported';\n  progress: number;\n  rowCount?: number;\n  validRows?: number;\n  errors?: ValidationError[];\n  previewData?: any[];\n}\n\nexport const BulkUpload: React.FC = () => {\n  const [files, setFiles] = useState<BulkUploadFile[]>([]);\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [showPreview, setShowPreview] = useState<string | null>(null);\n\n  const templateData = [\n    {\n      facility_id: 'fac1',\n      metric_type: 'environmental',\n      metric_name: 'emissions',\n      value: 245,\n      unit: 'tons',\n      reporting_period: '2024-Q2',\n      date_recorded: '2024-06-15'\n    },\n    {\n      facility_id: 'fac1',\n      metric_type: 'environmental',\n      metric_name: 'energy',\n      value: 1250,\n      unit: 'MWh',\n      reporting_period: '2024-Q2',\n      date_recorded: '2024-06-15'\n    },\n    {\n      facility_id: 'fac1',\n      metric_type: 'social',\n      metric_name: 'employees',\n      value: 450,\n      unit: 'count',\n      reporting_period: '2024-Q2',\n      date_recorded: '2024-06-15'\n    }\n  ];\n\n  const downloadTemplate = () => {\n    const csv = [\n      Object.keys(templateData[0]).join(','),\n      ...templateData.map(row => Object.values(row).join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'esg_data_template.csv';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  };\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n    const droppedFiles = Array.from(e.dataTransfer.files);\n    processFiles(droppedFiles);\n  }, []);\n\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const selectedFiles = Array.from(e.target.files);\n      processFiles(selectedFiles);\n    }\n  }, []);\n\n  const processFiles = (fileList: File[]) => {\n    const excelFiles = fileList.filter(file => {\n      const isExcel = file.type.includes('sheet') || file.type.includes('excel') || file.name.endsWith('.csv');\n      if (!isExcel) {\n        alert(`File ${file.name} is not a supported spreadsheet format`);\n        return false;\n      }\n      if (file.size > 5 * 1024 * 1024) { // 5MB limit\n        alert(`File ${file.name} is too large. Maximum size is 5MB`);\n        return false;\n      }\n      return true;\n    });\n\n    const newFiles: BulkUploadFile[] = excelFiles.map(file => ({\n      id: Math.random().toString(36).substr(2, 9),\n      name: file.name,\n      size: file.size,\n      status: 'uploading',\n      progress: 0\n    }));\n\n    setFiles(prev => [...prev, ...newFiles]);\n\n    newFiles.forEach(file => {\n      simulateFileProcessing(file.id);\n    });\n  };\n\n  const simulateFileProcessing = async (fileId: string) => {\n    // Simulate upload\n    for (let progress = 0; progress <= 100; progress += 25) {\n      await new Promise(resolve => setTimeout(resolve, 200));\n      setFiles(prev => prev.map(f => \n        f.id === fileId ? { ...f, progress } : f\n      ));\n    }\n\n    // Start validation\n    setFiles(prev => prev.map(f => \n      f.id === fileId ? { ...f, status: 'validating', progress: 0 } : f\n    ));\n\n    // Simulate validation progress\n    for (let progress = 0; progress <= 100; progress += 20) {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      setFiles(prev => prev.map(f => \n        f.id === fileId ? { ...f, progress } : f\n      ));\n    }\n\n    // Simulate validation results\n    const mockErrors: ValidationError[] = [\n      { row: 5, column: 'value', value: 'invalid', error: 'Value must be numeric' },\n      { row: 8, column: 'facility_id', value: 'unknown', error: 'Facility ID not found' }\n    ];\n\n    const mockPreviewData = [\n      { facility_id: 'fac1', metric_type: 'environmental', metric_name: 'emissions', value: 245, unit: 'tons' },\n      { facility_id: 'fac1', metric_type: 'environmental', metric_name: 'energy', value: 1250, unit: 'MWh' },\n      { facility_id: 'fac1', metric_type: 'social', metric_name: 'employees', value: 450, unit: 'count' }\n    ];\n\n    // Complete validation\n    setFiles(prev => prev.map(f => \n      f.id === fileId ? { \n        ...f, \n        status: mockErrors.length > 0 ? 'invalid' : 'valid',\n        progress: 100,\n        rowCount: 150,\n        validRows: 148,\n        errors: mockErrors,\n        previewData: mockPreviewData\n      } : f\n    ));\n  };\n\n  const removeFile = (fileId: string) => {\n    setFiles(prev => prev.filter(f => f.id !== fileId));\n  };\n\n  const importFile = async (fileId: string) => {\n    setFiles(prev => prev.map(f => \n      f.id === fileId ? { ...f, status: 'imported' } : f\n    ));\n    // Simulate import process\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'valid':\n        return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'invalid':\n        return <AlertTriangle className=\"w-5 h-5 text-red-500\" />;\n      case 'imported':\n        return <CheckCircle className=\"w-5 h-5 text-blue-500\" />;\n      default:\n        return <div className=\"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />;\n    }\n  };\n\n  const getStatusText = (file: BulkUploadFile) => {\n    switch (file.status) {\n      case 'uploading':\n        return 'Uploading...';\n      case 'validating':\n        return 'Validating data...';\n      case 'valid':\n        return `Valid (${file.validRows}/${file.rowCount} rows)`;\n      case 'invalid':\n        return `Invalid (${file.errors?.length} errors found)`;\n      case 'imported':\n        return 'Successfully imported';\n      default:\n        return 'Processing...';\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Bulk Upload</h1>\n          <button\n            onClick={downloadTemplate}\n            className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n          >\n            <Download className=\"w-4 h-4 mr-2\" />\n            Download Template\n          </button>\n        </div>\n\n        <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Template Format</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  {Object.keys(templateData[0]).map(header => (\n                    <th key={header} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {header}\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {templateData.map((row, index) => (\n                  <tr key={index}>\n                    {Object.values(row).map((value, cellIndex) => (\n                      <td key={cellIndex} className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {value}\n                      </td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div\n          className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n            isDragOver\n              ? 'border-blue-400 bg-blue-50'\n              : 'border-gray-300 hover:border-gray-400'\n          }`}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n        >\n          <FileSpreadsheet className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            Upload Excel/CSV Files\n          </h3>\n          <p className=\"text-gray-600 mb-4\">\n            Drag and drop your spreadsheet files here, or click to browse\n          </p>\n          <input\n            type=\"file\"\n            multiple\n            accept=\".xlsx,.xls,.csv\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n            id=\"bulk-upload\"\n          />\n          <label\n            htmlFor=\"bulk-upload\"\n            className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <Upload className=\"w-4 h-4 mr-2\" />\n            Choose Files\n          </label>\n        </div>\n\n        {files.length > 0 && (\n          <div className=\"bg-white rounded-lg shadow-sm\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Upload Progress</h3>\n            </div>\n            <div className=\"p-6 space-y-4\">\n              {files.map((file) => (\n                <div key={file.id} className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <div className=\"flex items-center\">\n                      <FileSpreadsheet className=\"w-6 h-6 text-green-500\" />\n                      <div className=\"ml-3\">\n                        <p className=\"text-sm font-medium text-gray-900\">{file.name}</p>\n                        <p className=\"text-xs text-gray-500\">\n                          {formatFileSize(file.size)} • {getStatusText(file)}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-3\">\n                      {getStatusIcon(file.status)}\n                      {file.status === 'valid' && (\n                        <button\n                          onClick={() => setShowPreview(showPreview === file.id ? null : file.id)}\n                          className=\"text-blue-600 hover:text-blue-800\"\n                        >\n                          <Eye className=\"w-4 h-4\" />\n                        </button>\n                      )}\n                      <button\n                        onClick={() => removeFile(file.id)}\n                        className=\"text-gray-400 hover:text-gray-600\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  {(file.status === 'uploading' || file.status === 'validating') && (\n                    <div className=\"mb-3\">\n                      <div className=\"flex justify-between text-xs text-gray-600 mb-1\">\n                        <span>{getStatusText(file)}</span>\n                        <span>{file.progress}%</span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div\n                          className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                          style={{ width: `${file.progress}%` }}\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {file.status === 'invalid' && file.errors && (\n                    <div className=\"bg-red-50 rounded-lg p-3 mb-3\">\n                      <h4 className=\"text-sm font-medium text-red-800 mb-2\">\n                        Validation Errors ({file.errors.length})\n                      </h4>\n                      <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                        {file.errors.map((error, index) => (\n                          <div key={index} className=\"text-xs text-red-700\">\n                            Row {error.row}, Column \"{error.column}\": {error.error}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {file.status === 'valid' && showPreview === file.id && file.previewData && (\n                    <div className=\"bg-green-50 rounded-lg p-3 mb-3\">\n                      <h4 className=\"text-sm font-medium text-green-800 mb-2\">\n                        Data Preview (First 3 rows)\n                      </h4>\n                      <div className=\"overflow-x-auto\">\n                        <table className=\"min-w-full text-xs\">\n                          <thead>\n                            <tr>\n                              {Object.keys(file.previewData[0]).map(header => (\n                                <th key={header} className=\"text-left px-2 py-1 text-green-700\">\n                                  {header}\n                                </th>\n                              ))}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {file.previewData.map((row, index) => (\n                              <tr key={index}>\n                                {Object.values(row).map((value, cellIndex) => (\n                                  <td key={cellIndex} className=\"px-2 py-1 text-green-600\">\n                                    {String(value)}\n                                  </td>\n                                ))}\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                    </div>\n                  )}\n\n                  {file.status === 'valid' && (\n                    <div className=\"flex justify-end\">\n                      <button\n                        onClick={() => importFile(file.id)}\n                        className=\"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700\"\n                      >\n                        Import Data\n                      </button>\n                    </div>\n                  )}\n\n                  {file.status === 'imported' && (\n                    <div className=\"bg-blue-50 rounded-lg p-3\">\n                      <p className=\"text-sm text-blue-700\">\n                        ✅ Successfully imported {file.validRows} rows of ESG data\n                      </p>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <AlertTriangle className=\"h-5 w-5 text-amber-400\" />\n            </div>\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-amber-800\">Bulk Upload Guidelines</h3>\n              <div className=\"mt-2 text-sm text-amber-700\">\n                <ul className=\"list-disc pl-5 space-y-1\">\n                  <li>Use the provided template format for best results</li>\n                  <li>Ensure facility_id matches your assigned facilities</li>\n                  <li>Numeric values should not contain commas or currency symbols</li>\n                  <li>Dates should be in YYYY-MM-DD format</li>\n                  <li>Maximum file size: 5MB per file</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}