{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./context/AuthContext';import{Login}from'./pages/Login';import{AdminHome}from'./pages/AdminHome';import{FacilityHome}from'./pages/FacilityHome';import{Facilities}from'./pages/Facilities';import{FacilityDetail}from'./pages/FacilityDetail';import{ManualEntry}from'./components/data-collection/ManualEntry';import{DocumentUpload}from'./components/data-collection/DocumentUpload';import{BulkUpload}from'./components/data-collection/BulkUpload';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles}=_ref;const{isAuthenticated,user}=useAuth();if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}if(allowedRoles&&user&&!allowedRoles.includes(user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};const AppRoutes=()=>{const{isAuthenticated,user}=useAuth();return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:isAuthenticated?(user===null||user===void 0?void 0:user.role)==='admin'?/*#__PURE__*/_jsx(Navigate,{to:\"/admin\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/facility\",replace:true}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminHome,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/facilities\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(Facilities,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/facility/:facilityId\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(FacilityDetail,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/facility\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['facility_head'],children:/*#__PURE__*/_jsx(FacilityHome,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/facility/manual-entry\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['facility_head'],children:/*#__PURE__*/_jsx(ManualEntry,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/facility/upload-docs\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['facility_head'],children:/*#__PURE__*/_jsx(DocumentUpload,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/facility/bulk-upload\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['facility_head'],children:/*#__PURE__*/_jsx(BulkUpload,{})})})]});};function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(AppRoutes,{})})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","useAuth","Login","AdminHome","FacilityHome","Facilities","FacilityDetail","ManualEntry","DocumentUpload","BulkUpload","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProtectedRoute","_ref","children","allowedRoles","isAuthenticated","user","to","replace","includes","role","AppRoutes","path","element","App","className"],"sources":["/Users/hellevete/Documents/sagaruiv2/latspacefrontend/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './context/AuthContext';\nimport { Login } from './pages/Login';\nimport { AdminHome } from './pages/AdminHome';\nimport { FacilityHome } from './pages/FacilityHome';\nimport { Facilities } from './pages/Facilities';\nimport { FacilityDetail } from './pages/FacilityDetail';\nimport { ManualEntry } from './components/data-collection/ManualEntry';\nimport { DocumentUpload } from './components/data-collection/DocumentUpload';\nimport { BulkUpload } from './components/data-collection/BulkUpload';\n\nconst ProtectedRoute: React.FC<{ children: React.ReactNode; allowedRoles?: string[] }> = ({ \n  children, \n  allowedRoles \n}) => {\n  const { isAuthenticated, user } = useAuth();\n  \n  if (!isAuthenticated) {\n    return <Navigate to=\"/\" replace />;\n  }\n  \n  if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n    return <Navigate to=\"/\" replace />;\n  }\n  \n  return <>{children}</>;\n};\n\nconst AppRoutes: React.FC = () => {\n  const { isAuthenticated, user } = useAuth();\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={\n        isAuthenticated ? (\n          user?.role === 'admin' ? <Navigate to=\"/admin\" replace /> : <Navigate to=\"/facility\" replace />\n        ) : (\n          <Login />\n        )\n      } />\n      \n      <Route path=\"/admin\" element={\n        <ProtectedRoute allowedRoles={['admin']}>\n          <AdminHome />\n        </ProtectedRoute>\n      } />\n      \n      <Route path=\"/admin/facilities\" element={\n        <ProtectedRoute allowedRoles={['admin']}>\n          <Facilities />\n        </ProtectedRoute>\n      } />\n      \n      <Route path=\"/admin/facility/:facilityId\" element={\n        <ProtectedRoute allowedRoles={['admin']}>\n          <FacilityDetail />\n        </ProtectedRoute>\n      } />\n      \n      <Route path=\"/facility\" element={\n        <ProtectedRoute allowedRoles={['facility_head']}>\n          <FacilityHome />\n        </ProtectedRoute>\n      } />\n      \n      <Route path=\"/facility/manual-entry\" element={\n        <ProtectedRoute allowedRoles={['facility_head']}>\n          <ManualEntry />\n        </ProtectedRoute>\n      } />\n      \n      <Route path=\"/facility/upload-docs\" element={\n        <ProtectedRoute allowedRoles={['facility_head']}>\n          <DocumentUpload />\n        </ProtectedRoute>\n      } />\n      \n      <Route path=\"/facility/bulk-upload\" element={\n        <ProtectedRoute allowedRoles={['facility_head']}>\n          <BulkUpload />\n        </ProtectedRoute>\n      } />\n    </Routes>\n  );\n};\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <div className=\"min-h-screen bg-gray-50\">\n          <AppRoutes />\n        </div>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}